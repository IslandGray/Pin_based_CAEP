<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">
	
<struts>
    <include file="struts-default.xml"/>
    
    <constant name="struts.multipart.maxSize" value="4097152" />
      
    <package name="REG" extends="struts-default">
    	<!-- 
	     <action name="find-book" class="action.BookDB" method="find">
	      	<result name="SUCCESS">/WEB-INF/pages/list.jsp</result>
	      	<result name="NOPERSON">/WEB-INF/pages/no-person.jsp</result>
	     </action>
	     -->
	     <action name="RegSwitch">
	      	<result>/WEB-INF/pages/Register/RegSwitch.jsp</result>
	     </action>
	     <action name="RegSubmitTest" class="com.wcp.project.register.RegTest" method="registerTest">
	      	<result name="REGISTED" type="redirectAction">GotoLogin?user=${inputEmail}</result>
	      	<result name="SUCCESS"  type="redirectAction">Regist?user=${inputEmail}</result>
	      	<result name="ERROR">/WEB-INF/pages/Register/RegSwitch.jsp</result>
	     </action>
	     <action name="Regist">
	      	<result>/WEB-INF/pages/Register/Regist.jsp</result>
	     </action>
	     <action name="finishReg" class="com.wcp.project.register.FinishReg" method="finishReg">
	     	<result name="SUCCESS" type="redirectAction">GotoLogin?user=${inputEmail}</result>
	     	<result name="FAILED" type="redirectAction">failedReg</result>
	     </action>
	     <action name="failedReg">
	     	<result>/WEB-INF/pages/Register/RegFail.jsp</result>
	     </action>
    </package>
    
    <package name="LOGIN" extends="struts-default">
    	<action name="GotoLogin">
    		<result>/WEB-INF/pages/Login/Login.jsp</result>
    	</action>
    	<action name="Login" class="com.wcp.project.login.Login" method="login">
    		<result name="SUCCESS" type="redirectAction">GotoHomepage</result>
    		<result name="ERROR" type="redirectAction">GotoLogin?errcode=-1&amp;user=${inputEmail}&amp;name=${inputName}</result>
    	</action>
    	<action name="loginExit">
    		<result>/WEB-INF/pages/Login/Logout.jsp</result>
    	</action>
    </package>
    <package name="HOMEPAGE" extends="struts-default">
    	<action name="GotoHomepage" class="com.wcp.project.homepage.GotoHome" method="gohome">
    		<result name="stuLOGGED">/WEB-INF/pages/Student/HomePage.jsp</result>
    		<result name="teaLOGGED"></result>
    		<result name="taLOGGED"></result>
    		<result name="adLOGGED"></result>
    		<result name="suLOGGED"></result>
    		<result name="FAILED" type="redirectAction">GotoLogin</result>
    	</action>
    </package>
    <package name="LAB" extends="struts-default">
    	<action name="GotoLab" class="com.wcp.project.lab.GotoLab" method="gotolab">
    		<result name="stuLOGGED">/WEB-INF/pages/Experiments/LabPage.jsp</result>
    		<result name="teaLOGGED"></result>
    		<result name="taLOGGED"></result>
    		<result name="adLOGGED"></result>
    		<result name="suLOGGED"></result>
    		<result name="FAILED" type="redirectAction">GotoLogin</result>
    	</action>
    	<action name="GotoLab1" class="com.wcp.project.lab.GotoLab" method="gotolab">
    		<result name="stuLOGGED"></result>
    		<result name="teaLOGGED"></result>
    		<result name="taLOGGED"></result>
    		<result name="adLOGGED"></result>
    		<result name="suLOGGED"></result>
    		<result name="FAILED" type="redirectAction">GotoLogin</result>
    	</action>
    	<action name="GotoLab2" class="com.wcp.project.lab.GotoLab" method="gotolab">
    		<result name="stuLOGGED"></result>
    		<result name="teaLOGGED"></result>
    		<result name="taLOGGED"></result>
    		<result name="adLOGGED"></result>
    		<result name="suLOGGED"></result>
    		<result name="FAILED" type="redirectAction">GotoLogin</result>
    	</action>
    	<action name="GotoLab3" class="com.wcp.project.lab.GotoLab" method="gotolab">
    		<result name="stuLOGGED"></result>
    		<result name="teaLOGGED"></result>
    		<result name="taLOGGED"></result>
    		<result name="adLOGGED"></result>
    		<result name="suLOGGED"></result>
    		<result name="FAILED" type="redirectAction">GotoLogin</result>
    	</action>
    	
    	<action name="Lab0Upload" class="com.wcp.project.lab.LabUpload" method="upload0">
    		<interceptor-ref name="defaultStack">
 	        <!-- 限制上传文件的扩展名。如果有多个，使用逗号分隔
 	        <param name="fileUpload.allowedExtensions">cpp</param>-->
	        <!-- 限制上传文件的MIME类型。 如果有多个，使用逗号分隔--> 
            <param name="fileUpload.allowedTypes">text/plain</param>
	        </interceptor-ref>
	        <result name="SUCCESS" type="redirectAction">GotoLab?tag=1</result>
	        <result name="FAILED" type="redirectAction">GotoLab?tag=2</result>
    	</action>
    </package>
   
</struts>